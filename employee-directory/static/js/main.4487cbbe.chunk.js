(this["webpackJsonpemployee-directory"]=this["webpackJsonpemployee-directory"]||[]).push([[0],{15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(8),c=a.n(s),i=a(1),o=a.n(i),l=a(6),u=a(2),p=a(3),h=a(5),m=a(4),d=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"searchComponentDiv"},this.props.searchState?n.a.createElement(f,{searchedEmployee:this.props.searchedEmployee,childInputRef:this.props.childInputRef,employeeList:this.props.employeeList,directSubordinates:this.props.directSubordinates,backToSearchClick:this.props.backToSearchClick,isEmployee:this.props.isEmployee}):n.a.createElement(y,{searchClick:this.props.searchClick,childInputRef:this.props.childInputRef,fuzzySearch:this.props.fuzzySearch,showfuzzyResult:this.props.showfuzzyResult,fuzzyResult:this.props.fuzzyResult,setFuzzyText:this.props.setFuzzyText}))}}]),a}(n.a.Component),y=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).highlightText=function(e,t){return{__html:e.replace(new RegExp(t,"gi"),"<span class='bold'>$&</span>")}},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"searchDiv"},n.a.createElement("div",{className:"formGroup"},n.a.createElement("input",{type:"text",placeholder:"Employee name",ref:this.props.childInputRef,onChange:function(){return e.props.fuzzySearch(e.props.childInputRef.current.value)}}),n.a.createElement("span",{className:"btn",onClick:function(){return e.props.searchClick(e.props.childInputRef.current.value)}},"Search"),this.props.showfuzzyResult&&n.a.createElement("ul",{className:"fuzzy-search"},this.props.fuzzyResult.map((function(t,a){return n.a.createElement("li",{key:a,onClick:function(){return e.props.setFuzzyText(t)},dangerouslySetInnerHTML:e.highlightText(t,e.props.childInputRef.current.value)})})))))}}]),a}(n.a.Component),f=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props.directSubordinates;return n.a.createElement("div",{className:"resultDiv"},n.a.createElement("h3",null,this.props.isEmployee?t.length<1?this.props.searchedEmployee+" do not have subordinates.":"Subordinates of employee "+this.props.searchedEmployee+": ":"No such employee!"),n.a.createElement("ul",null,this.props.employeeList.map((function(e,a){return n.a.createElement("li",{key:a},e+(t.includes(e)?" (Direct Subordinate)":" (Indirect Subordinate)"))}))),n.a.createElement("span",{className:"btn",onClick:function(){return e.props.backToSearchClick()}},"Back To Search"))}}]),a}(n.a.Component),v=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"page-loader "+(this.props.isRender?"":"hide")},n.a.createElement("div",{className:"loader-div"},n.a.createElement("div",{className:"page-spinner-wrap"},n.a.createElement("div",{className:"page-spinner"},n.a.createElement("div",null),n.a.createElement("div",null),n.a.createElement("div",null),n.a.createElement("div",null),n.a.createElement("div",null),n.a.createElement("div",null),n.a.createElement("div",null),n.a.createElement("div",null),n.a.createElement("div",null))),n.a.createElement("div",{className:"loading-msg"},"Browsing through employees' data, please\xa0wait...")))}}]),a}(n.a.Component),E=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={isSearched:!1,isLoadRender:!1,isEmployee:!1,searchedEmployee:"",employeeList:[],directSubordinates:[],showfuzzyResult:!1,fuzzyResult:[]},e.searchInput=n.a.createRef(),e.searchEmployee=function(){var t=Object(l.a)(o.a.mark((function t(a){var r,n,s,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.setState({isLoadRender:!0}),""===a.trim()){t.next=11;break}return r=a,t.next=5,e.fetchEmployeeData(r);case 5:for(n=t.sent,s=null!==n&&void 0!==n[1]?n[1]["Direct Subordinates"]:[],e.setState({employeeList:[]}),e.setState({searchedEmployee:a,isEmployee:void 0!==n[0]}),c=0;c<s.length;c++)e.setState({directSubordinates:e.state.directSubordinates.concat(s[c])});e.recursiveLoop(n).then((function(){e.setState({isSearched:!0,isLoadRender:!1}),window.history.pushState({employeeName:a},"","?name="+a)}));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.recursiveLoop=function(){var t=Object(l.a)(o.a.mark((function t(a){var r,n,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r="",n=void 0!==a[1]?a[1]["Direct Subordinates"]:[],s=0;case 3:if(!(s<n.length)){t.next=14;break}return e.state.employeeList.includes(n[s])||e.setState({employeeList:e.state.employeeList.concat(n[s])}),t.next=7,e.fetchEmployeeData(n[s]);case 7:if("employee"===(r=t.sent)[0].toLowerCase()){t.next=11;break}return t.next=11,e.recursiveLoop(r);case 11:s++,t.next=3;break;case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.fetchEmployeeData=function(){var e=Object(l.a)(o.a.mark((function e(t){var a,r,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://jellymiso.herokuapp.com/api/employees/"+t,e.next=3,fetch(a);case 3:return r=e.sent,e.next=6,r.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.getAllEmployeeNames=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://jellymiso.herokuapp.com/api/employees",e.next=3,fetch("https://jellymiso.herokuapp.com/api/employees");case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)}))),e.fuzzySearch=function(t){var a=[];e.setState({showfuzzyResult:null!==t&&""!==t.trim()}),null!==t&&""!==t.trim()&&e.getAllEmployeeNames().then((function(r){r.map((function(e,r){e.toLowerCase().includes(t.toLowerCase())&&a.push(e)})),e.setState({fuzzyResult:a})}))},e.clearSearchState=function(){e.setState({isSearched:!1}),window.history.pushState({},"",window.location.href.split("?")[0])},e.setFuzzyText=function(t){e.searchInput.current.value=t,e.setState({showfuzzyResult:!1})},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=window.location.search,t=new URLSearchParams(e).get("name");null!==t&&""!==t.trim()&&(this.setState({isSearched:!0}),this.searchEmployee(t))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return n.a.createElement("div",{id:"myApp"},n.a.createElement("div",{id:"employee-directory"},n.a.createElement("h1",null,this.state.isSearched?"Employee Overview":"Employee Explorer"),n.a.createElement(d,{childInputRef:this.searchInput,searchedEmployee:this.state.searchedEmployee,searchClick:this.searchEmployee,searchState:this.state.isSearched,employeeList:this.state.employeeList,directSubordinates:this.state.directSubordinates,backToSearchClick:this.clearSearchState,isEmployee:this.state.isEmployee,fuzzySearch:this.fuzzySearch,showfuzzyResult:this.state.showfuzzyResult,fuzzyResult:this.state.fuzzyResult,setFuzzyText:this.setFuzzyText})),n.a.createElement(v,{isRender:this.state.isLoadRender}))}}]),a}(n.a.Component);a(15);c.a.render(n.a.createElement(E,null),document.getElementById("root"))},9:function(e,t,a){e.exports=a(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.4487cbbe.chunk.js.map