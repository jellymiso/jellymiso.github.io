(this["webpackJsonpemployee-directory"]=this["webpackJsonpemployee-directory"]||[]).push([[0],{15:function(e,t,r){},16:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),s=r(8),c=r.n(s),i=r(1),o=r.n(i),p=r(6),l=r(2),u=r(3),h=r(5),m=r(4),d=function(e){Object(h.a)(r,e);var t=Object(m.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){return n.a.createElement("div",{className:"searchComponentDiv"},this.props.searchState?n.a.createElement(f,{searchedEmployee:this.props.searchedEmployee,childInputRef:this.props.childInputRef,employeeList:this.props.employeeList,directSubordinates:this.props.directSubordinates,backToSearchClick:this.props.backToSearchClick,isEmployee:this.props.isEmployee}):n.a.createElement(y,{searchClick:this.props.searchClick,childInputRef:this.props.childInputRef}))}}]),r}(n.a.Component),y=function(e){Object(h.a)(r,e);var t=Object(m.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"searchDiv"},n.a.createElement("div",{className:"formGroup"},n.a.createElement("input",{type:"text",placeholder:"Employee name",ref:this.props.childInputRef}),n.a.createElement("span",{className:"btn",onClick:function(){return e.props.searchClick(e.props.childInputRef.current.value)}},"Search")))}}]),r}(n.a.Component),f=function(e){Object(h.a)(r,e);var t=Object(m.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){var e=this,t=this.props.directSubordinates;return n.a.createElement("div",{className:"resultDiv"},n.a.createElement("h3",null,this.props.isEmployee?t.length<1?this.props.searchedEmployee+" do not have subordinates.":"Subordinates of employee "+this.props.searchedEmployee+": ":"No such employee!"),n.a.createElement("ul",null,this.props.employeeList.map((function(e,r){return n.a.createElement("li",{key:r},e+(t.includes(e)?" (Direct Subordinate)":" (Indirect Subordinate)"))}))),n.a.createElement("span",{className:"btn",onClick:function(){return e.props.backToSearchClick()}},"Back To Search"))}}]),r}(n.a.Component),b=function(e){Object(h.a)(r,e);var t=Object(m.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={isSearched:!1,isEmployee:!1,searchedEmployee:"",employeeList:[],directSubordinates:[]},e.searchInput=n.a.createRef(),e.searchEmployee=function(){var t=Object(p.a)(o.a.mark((function t(r){var a,n,s,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===r.trim()){t.next=10;break}return a=r,t.next=4,e.fetchEmployeeData(a);case 4:for(n=t.sent,s=null!==n&&void 0!==n[1]?n[1]["direct-subordinates"]:[],e.setState({employeeList:[]}),e.setState({searchedEmployee:r,isEmployee:void 0!==n[0]}),c=0;c<s.length;c++)e.setState({directSubordinates:e.state.directSubordinates.concat(s[c])});e.recursiveLoop(n).then((function(){e.setState({isSearched:!0}),window.history.pushState({employeeName:r},"","?name="+r)}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.recursiveLoop=function(){var t=Object(p.a)(o.a.mark((function t(r){var a,n,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a="",n=void 0!==r[1]?r[1]["direct-subordinates"]:[],s=0;case 3:if(!(s<n.length)){t.next=14;break}return e.state.employeeList.includes(n[s])||e.setState({employeeList:e.state.employeeList.concat(n[s])}),t.next=7,e.fetchEmployeeData(n[s]);case 7:if("employee"===(a=t.sent)[0].toLowerCase()){t.next=11;break}return t.next=11,e.recursiveLoop(a);case 11:s++,t.next=3;break;case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.fetchEmployeeData=function(){var e=Object(p.a)(o.a.mark((function e(t){var r,a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="http://api.additivasia.io/api/v1/assignment/employees/"+t,e.next=3,fetch(r);case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.clearSearchState=function(){e.setState({isSearched:!1}),window.history.pushState({},"",window.location.href.split("?")[0])},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=window.location.search,t=new URLSearchParams(e).get("name");null!==t&&""!==t.trim()&&(this.setState({isSearched:!0}),this.searchEmployee(t))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return n.a.createElement("div",{id:"employee-directory"},n.a.createElement("h1",null,this.state.isSearched?"Employee Overview":"Employee Explorer"),n.a.createElement(d,{childInputRef:this.searchInput,searchedEmployee:this.state.searchedEmployee,searchClick:this.searchEmployee,searchState:this.state.isSearched,employeeList:this.state.employeeList,directSubordinates:this.state.directSubordinates,backToSearchClick:this.clearSearchState,isEmployee:this.state.isEmployee}))}}]),r}(n.a.Component);r(15);c.a.render(n.a.createElement(b,null),document.getElementById("root"))},9:function(e,t,r){e.exports=r(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.9904821f.chunk.js.map